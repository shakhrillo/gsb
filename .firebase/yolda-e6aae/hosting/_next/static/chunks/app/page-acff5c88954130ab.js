(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3093:(e,s,a)=>{"use strict";a.d(s,{default:()=>R});var t=a(5155),r=a(2115),l=a(6766),i=a(3464);let n="https://scrappio.site",c=async e=>{try{return(await i.A.get("".concat(n,"/api/products?merchantUid=").concat(e))).data}catch(e){throw console.error("Error fetching products:",e),e}},d=async()=>{try{return(await i.A.get("".concat(n,"/api/merchants"))).data}catch(e){throw console.error("Error fetching merchants:",e),e}};var o=a(2085),m=a(2596),x=a(9688);function h(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,x.QP)((0,m.$)(s))}let g=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function u(e){let{className:s,variant:a,...r}=e;return(0,t.jsx)("div",{className:h(g({variant:a}),s),...r})}var p=a(4624);let f=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),v=r.forwardRef((e,s)=>{let{className:a,variant:r,size:l,asChild:i=!1,...n}=e,c=i?p.DX:"button";return(0,t.jsx)(c,{className:h(f({variant:r,size:l,className:a})),ref:s,...n})});v.displayName="Button";let b=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:h("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});b.displayName="Card",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:h("flex flex-col space-y-1.5 p-6",a),...r})}).displayName="CardHeader",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:h("text-2xl font-semibold leading-none tracking-tight",a),...r})}).displayName="CardTitle",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:h("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let j=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:h("p-6 pt-0",a),...r})});j.displayName="CardContent",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:h("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var N=a(7550),y=a(8564),w=a(7809),k=a(5196),C=a(4616);let A=e=>{let{setShowBasket:s,getBasketItemCount:a,goBack:i,addToBasket:n,selectedMerchant:d}=e,[o,m]=(0,r.useState)([]),[x,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{d&&c(d.id).then(m).catch(e=>{console.error("Error fetching products:",e),m([])})},[d]);let g=e=>({Sale:"bg-red-500 hover:bg-red-600",New:"bg-green-500 hover:bg-green-600",Popular:"bg-blue-500 hover:bg-blue-600"})[e]||"bg-purple-500 hover:bg-purple-600";return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(v,{variant:"ghost",size:"sm",onClick:i,className:"p-2",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"font-semibold text-gray-900",children:null==d?void 0:d.name}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,t.jsx)(y.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{children:null==d?void 0:d.rating}),(0,t.jsx)("span",{children:"â€¢"}),(0,t.jsx)("span",{children:null==d?void 0:d.deliveryTime})]})]}),(0,t.jsxs)(v,{variant:"ghost",size:"sm",className:"relative p-2",onClick:()=>s(!0),children:[(0,t.jsx)(w.A,{className:"h-5 w-5"}),a()>0&&(0,t.jsx)(u,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs bg-red-500",children:a()})]})]})}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:[o.length," Products"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:o.map(e=>(0,t.jsx)(b,{className:"overflow-hidden border-0 shadow-sm",children:(0,t.jsxs)(j,{className:"p-0",children:[(0,t.jsxs)("div",{className:"relative bg-black/5 hover:bg-black/10",children:[(0,t.jsx)(l.default,{src:e.photo,alt:e.name,width:200,height:200,className:"w-full h-40 sm:h-48 object-contain"}),e.badge&&(0,t.jsx)(u,{className:"absolute top-2 left-2 text-xs ".concat(g(e.badge)),children:e.badge}),(0,t.jsx)(v,{size:"sm",variant:"ghost",className:"absolute top-2 right-2 h-8 w-8 p-0 bg-white/80 hover:bg-white rounded-full",onClick:()=>console.log(e.id),children:x.includes(e.id)?(0,t.jsx)(k.A,{className:"h-4 w-4 text-red-500"}):(0,t.jsx)(C.A,{className:"h-4 w-4 text-gray-600"})})]}),(0,t.jsxs)("div",{className:"p-3",children:[(0,t.jsx)("h3",{className:"mb-1 text-sm font-medium text-gray-900 line-clamp-2",children:e.name}),(0,t.jsx)("p",{className:"mb-2 text-xs text-gray-500",children:e.description||"No description available."}),(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-1 text-xs text-gray-600",children:[(0,t.jsx)(y.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{children:e.rating||"-"}),(0,t.jsxs)("span",{className:"text-gray-400",children:["(",e.reviews||"0",")"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-bold text-gray-900",children:["$",e.price]}),e.unitOfMeasure&&(0,t.jsx)("span",{className:"text-xs text-gray-500",children:e.unitOfMeasure})]})]}),(0,t.jsxs)(v,{size:"sm",className:"w-full",onClick:()=>n(e,d),children:[(0,t.jsx)(C.A,{className:"h-3 w-3 mr-1"}),"Add to Basket"]})]})},e.id))}),0===o.length&&(0,t.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No products available from this merchant."})]})]})};var z=a(3052),S=a(4186),B=a(4516);let E=e=>{let{setShowBasket:s,getBasketItemCount:a,setSelectedMerchant:i}=e,[n,c]=(0,r.useState)([{id:"all",label:"All",active:!0}]),[o,m]=(0,r.useState)("all"),[x,h]=(0,r.useState)([]);return(0,r.useEffect)(()=>{},[o]),(0,r.useEffect)(()=>{d().then(e=>{h(e),c([{id:"all",label:"All",active:!0},...Array.from(new Set(e.map(e=>e.category))).map(e=>({id:e.toLowerCase(),label:e.charAt(0).toUpperCase()+e.slice(1),active:"all"===e.toLowerCase()}))])}).catch(e=>{console.error("Error fetching products:",e)})},[]),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Merchants"}),(0,t.jsxs)(v,{variant:"ghost",size:"sm",className:"relative p-2",onClick:()=>s(!0),children:[(0,t.jsx)(w.A,{className:"h-5 w-5"}),a()>0&&(0,t.jsx)(u,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs bg-red-500",children:a()})]})]}),(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1",children:n.map(e=>(0,t.jsx)(v,{variant:o===e.id?"default":"outline",size:"sm",className:"whitespace-nowrap flex-shrink-0 ".concat(o===e.id?"bg-black text-white":"bg-white text-gray-700 border-gray-300"),onClick:()=>m(e.id),children:e.label},e.id))})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[x.length," Merchants"]})}),(0,t.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,t.jsx)(b,{className:"overflow-hidden border-0 shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>i(e),children:(0,t.jsx)(j,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.default,{src:e.image||"/placeholder.svg",alt:e.name,width:60,height:60,className:"w-15 h-15 rounded-lg object-cover"}),e.badge&&(0,t.jsx)(u,{className:"absolute -top-1 -right-1 text-xs px-1 py-0 ".concat("Popular"===e.badge?"bg-blue-500 hover:bg-blue-600":"New"===e.badge?"bg-green-500 hover:bg-green-600":"Top Rated"===e.badge?"bg-purple-500 hover:bg-purple-600":"bg-red-500 hover:bg-red-600"),children:e.badge})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:e.name}),(0,t.jsx)(z.A,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(y.A,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-600 ml-1",children:e.rating})]}),(0,t.jsxs)("span",{className:"text-sm text-gray-400",children:["(",e.reviews,")"]}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"â€¢"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[e.productsCount," items"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.deliveryTime})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(B.A,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:e.distance})]}),(0,t.jsxs)("span",{className:"Free"===e.deliveryFee?"text-green-600 font-medium":"",children:[e.deliveryFee," delivery"]})]})]})]})})},e.id))}),0===x.length&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No merchants found in this category."})})]})]})};var q=a(7712),F=a(4416);let _=e=>{let{basket:s,setShowBasket:a,getBasketItemCount:r,updateQuantity:l,removeFromBasket:i,getBasketTotal:n}=e;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(v,{variant:"ghost",size:"sm",onClick:()=>a(!1),className:"p-2",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h1",{className:"font-semibold text-gray-900",children:"Your Basket"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[r()," items"]})]})]})}),(0,t.jsx)("div",{className:"p-4",children:0===s.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(w.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 mb-2",children:"Your basket is empty"}),(0,t.jsx)(v,{onClick:()=>a(!1),children:"Continue Shopping"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"space-y-3 mb-6",children:s.map(e=>(0,t.jsx)(b,{className:"overflow-hidden border-0 shadow-sm",children:(0,t.jsx)(j,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:e.image||"/placeholder.svg",alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-medium text-sm text-gray-900 truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.merchantName}),(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",e.price]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>l(e.id,e.quantity-1),children:(0,t.jsx)(q.A,{className:"h-3 w-3"})}),(0,t.jsx)("span",{className:"w-8 text-center text-sm font-medium",children:e.quantity}),(0,t.jsx)(v,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",onClick:()=>l(e.id,e.quantity+1),children:(0,t.jsx)(C.A,{className:"h-3 w-3"})}),(0,t.jsx)(v,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",onClick:()=>i(e.id),children:(0,t.jsx)(F.A,{className:"h-3 w-3"})})]})]})})},e.id))}),(0,t.jsx)(b,{className:"border-0 shadow-sm",children:(0,t.jsxs)(j,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:"Total"}),(0,t.jsxs)("span",{className:"font-bold text-lg text-gray-900",children:["$",n().toFixed(2)]})]}),(0,t.jsx)(v,{className:"w-full",size:"lg",children:"Proceed to Checkout"})]})})]})})]})};function R(){let[e,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1),i=()=>e.reduce((e,s)=>e+s.quantity,0),[n,c]=(0,r.useState)(null);return a?(0,t.jsx)(_,{basket:e,setShowBasket:l,getBasketItemCount:i,updateQuantity:(e,a)=>{0===a?s(s=>s.filter(s=>s.id!==e)):s(s=>s.map(s=>s.id===e?{...s,quantity:a}:s))},removeFromBasket:e=>{s(s=>s.filter(s=>s.id!==e))},getBasketTotal:()=>e.reduce((e,s)=>e+s.price*s.quantity,0)}):n?(0,t.jsx)(A,{goBack:()=>c(null),selectedMerchant:n,getBasketItemCount:i,setShowBasket:l,addToBasket:(e,a)=>{s(s=>s.find(s=>s.id===e.id)?s.map(s=>s.id===e.id?{...s,quantity:s.quantity+1}:s):[...s,{id:e.id,name:e.name,price:e.price,image:e.image,merchantId:a.id,merchantName:a.name,quantity:1}])}}):(0,t.jsx)(E,{setSelectedMerchant:c,getBasketItemCount:i,setShowBasket:l})}},9319:(e,s,a)=>{Promise.resolve().then(a.bind(a,3093))}},e=>{var s=s=>e(e.s=s);e.O(0,[610,441,684,358],()=>s(9319)),_N_E=e.O()}]);